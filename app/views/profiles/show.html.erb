<% content_for :title do %><%= @user.name %> - <%= t 'application.name' %><% end %>
<div class="page-header">
  <h1><%= profile_tag @user, 64 %></h1>
</div>

<div class="row">
  <div class="col-sm-5 col-sm-push-7">
    <%= div_for @tournaments do |tournament| %>
      <div class="clearfix">
        <%= link_to tournament.name, tournament_path(tournament) %>
        <% if current_user != @user %>
          <div class="btn-group pull-right">
            <%= link_to t(Challenge.model_name.human), new_challenge_path(:user_id => @user, :tournament_id => tournament), :class => tournament.games.challenged.participant(@user.id) ? 'btn btn-default disabled' : 'btn btn-default' %>
            <a class="btn btn-default dropdown-toggle" data-toggle="dropdown" href="#">
              <span class="caret"></span>
            </a>
            <ul class="dropdown-menu">
              <li><%= link_to t('tournaments.show.log_a_game'), new_game_path(:tournament_id => tournament, :user_id => @user) %></li>
            </ul>
          </div>
        <% end %>
      </div>
      <%= content_tag :svg, "", :style => "height: 150px", :class => "plot", :'data-url' => history_profile_path(@user, :tournament_id => tournament, :format => 'json') %>
    <% end %>
  </div>

  <div class="col-sm-7 col-sm-pull-5">
    <% if @activity.any? %>
      <%= render @activity %>
    <% else %>
      <h2><%= t 'activity.no_activity' %></h2>
      <p><%= sanitize t 'activity.no_activity_description', :start_on => time_tag(@start_on), :end_on => time_tag(@end_on) %></p>
    <% end %>
    <ul class="pager">
      <% if @page > 1 %>
        <li class="previous"><%= link_to t('activity.newer'), :page => (@page - 1) %></li>
      <% else %>
        <li class="previous disabled"><%= link_to t('activity.newer'), :page => 1 %></li>
      <% end %>
      <li class="next"><%= link_to t('activity.older'), :page => (@page + 1) %></li>
    </ul>
  </div>
</div>
